router id 192.168.0.3;
log syslog all;

protocol device {
  scan time 10;
  interface "*";
}

protocol direct {
  interface "*";
  check link on;
  ipv4;
}

protocol kernel {
  merge paths 64;
  learn yes;
  ipv4 {
    import all;
    export filter {
      if source = RTS_DEVICE then {
        reject;
      }
      accept;
    };
  };
}

protocol ospf v2 IGP {
  area 0.0.0.0 {
    interface "R3-R1";
    interface "R3-R2";
    interface "lo" {
      stub yes;
    };
  };
}

filter EXPORT {
  if net = 192.168.0.0/17 then accept;
  reject;
}

protocol bgp R5 {
  neighbor 192.168.6.1 as 65200;
  local as 65100;
  ipv4 {
    import all;
    export filter EXPORT;
  };
}

protocol bgp R6 {
  neighbor 192.168.8.1 as 65200;
  local as 65100;
  ipv4 {
    import all;
    export filter EXPORT;
  };
}

protocol static {
  ipv4;
  route 192.168.0.0/17 blackhole;
}
